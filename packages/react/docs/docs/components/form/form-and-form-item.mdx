---
title: 表单&表单项
---

### 基础使用

```jsx live
function Demo() {
  const [formData, setFormData] = useState({
    name: 'Micheal Jackson',
    gender: 'male',
    birthday: new Date('August 29, 1958'),
    displayBirthday: 'August 29, 1958',
    industry: 'Entertainment',
  })

  const setField = (k, v) =>
    setFormData({
      ...formData,
      [k]: v,
    })

  const genderOptions = [
    { label: 'Male', value: 'male' },
    { label: 'Female', value: 'female' },
  ]

  const industryOptions = [
    { label: 'IT', value: 'IT' },
    { label: 'Medical', value: 'Medical' },
    { label: 'Entertainment', value: 'Entertainment' },
    { label: 'Transportation', value: 'Transportation' },
  ]

  return (
    <CForm>
      <CFormItem label="姓名">
        <CInput value={formData.name} onChange={v => setField('name', v)} />
      </CFormItem>
      <CFormItem label="性别">
        <CRadioGroup
          value={formData.gender}
          options={genderOptions}
          onChange={v => setField('gender', v)}
        />
      </CFormItem>
      <CFormItem label="生日">
        <CDatePicker
          format="MMM DD, YYYY"
          value={formData.birthday}
          onChange={v => setField('birthday', v)}
          formattedValue={formData.displayBirthday}
          onFormattedValueChange={v => setField('displayBirthday', v)}
        />
      </CFormItem>
      <CFormItem label="行业">
        <CSelect
          value={formData.industry}
          onChange={v => setField('industry', v)}
          options={industryOptions}
        />
      </CFormItem>
    </CForm>
  )
}
```

### 配置式

```jsx live
function Demo() {
  const [formData, setFormData] = useState({
    name: 'Micheal Jackson',
    gender: 'male',
    birthday: new Date('August 29, 1958'),
    displayBirthday: 'August 29, 1958',
    industry: 'Entertainment',
  })

  const setField = (k, v) =>
    setFormData({
      ...formData,
      [k]: v,
    })

  const genderOptions = [
    { label: 'Male', value: 'male' },
    { label: 'Female', value: 'female' },
  ]

  const industryOptions = [
    { label: 'IT', value: 'IT' },
    { label: 'Medical', value: 'Medical' },
    { label: 'Entertainment', value: 'Entertainment' },
    { label: 'Transportation', value: 'Transportation' },
  ]

  const items = [
    {
      label: '姓名',
      children: (
        <CInput value={formData.name} onChange={v => setField('name', v)} />
      ),
    },
    {
      label: '性别',
      children: (
        <CRadioGroup
          value={formData.gender}
          options={genderOptions}
          onChange={v => setField('gender', v)}
        />
      ),
    },
    {
      label: '生日',
      children: (
        <CDatePicker
          format="MMM DD, YYYY"
          value={formData.birthday}
          onChange={v => setField('birthday', v)}
          formattedValue={formData.displayBirthday}
          onFormattedValueChange={v => setField('displayBirthday', v)}
        />
      ),
    },
    {
      label: '行业',
      children: (
        <CSelect
          value={formData.industry}
          onChange={v => setField('industry', v)}
          options={industryOptions}
        />
      ),
    },
  ]

  return <CForm items={items} />
}
```

### 尺寸&间隔尺寸&label 排列方向、对齐方式、宽度

```jsx live
function Demo() {
  const [formData, setFormData] = useState({
    name: 'Micheal Jackson',
    gender: 'male',
    birthday: new Date('August 29, 1958'),
    displayBirthday: 'August 29, 1958',
    industry: 'Entertainment',
  })

  const setField = (k, v) =>
    setFormData({
      ...formData,
      [k]: v,
    })

  const genderOptions = [
    { label: 'Male', value: 'male' },
    { label: 'Female', value: 'female' },
  ]

  const industryOptions = [
    { label: 'IT', value: 'IT' },
    { label: 'Medical', value: 'Medical' },
    { label: 'Entertainment', value: 'Entertainment' },
    { label: 'Transportation', value: 'Transportation' },
  ]

  const sizes = ['xs', 'sm', 'md', 'lg', 'xl']
  const [size, setSize] = useState('md')
  const [gutterSize, setGutterSize] = useState('md')
  const [labelWidth, setLabelWidth] = useState('80px')
  const directions = ['row', 'row-reverse', 'column', 'column-reverse']
  const [labelDirection, setLabelDirection] = useState('row')
  const [labelAlign, setLabelAlign] = useState('left')
  const [col, setCol] = useState(6)
  const items = [
    {
      label: '表单尺寸',
      children: (
        <CRadioGroup
          value={size}
          onChange={setSize}
          options={sizes.map(s => ({ label: s, value: s }))}
        />
      ),
    },
    {
      label: '项间隔尺寸',
      children: (
        <CRadioGroup
          value={gutterSize}
          onChange={setGutterSize}
          options={sizes.map(s => ({ label: s, value: s }))}
        />
      ),
    },
    {
      label: '项列宽',
      children: (
        <CRadioGroup
          value={col}
          onChange={setCol}
          options={[6, 12].map(s => ({ label: s, value: s }))}
        />
      ),
    },
    {
      label: 'label宽度',
      children: <CInput value={labelWidth} onChange={setLabelWidth} />,
    },
    {
      label: 'label与元素排列方向',
      children: (
        <CRadioGroup
          value={labelDirection}
          onChange={setLabelDirection}
          options={directions.map(d => ({
            label: d,
            value: d,
          }))}
        />
      ),
    },
    {
      label: 'label文字对齐方向',
      children: (
        <CRadioGroup
          value={labelAlign}
          onChange={setLabelAlign}
          options={['left', 'center', 'right'].map(d => ({
            label: d,
            value: d,
          }))}
        />
      ),
    },
    {
      label: '姓名',
      children: (
        <CInput value={formData.name} onChange={v => setField('name', v)} />
      ),
    },
    {
      label: '性别',
      children: (
        <CRadioGroup
          value={formData.gender}
          options={genderOptions}
          onChange={v => setField('gender', v)}
        />
      ),
    },
    {
      label: '生日',
      children: (
        <CDatePicker
          format="MMM DD, YYYY"
          value={formData.birthday}
          onChange={v => setField('birthday', v)}
          formattedValue={formData.displayBirthday}
          onFormattedValueChange={v => setField('displayBirthday', v)}
        />
      ),
    },
    {
      label: '行业',
      children: (
        <CSelect
          value={formData.industry}
          onChange={v => setField('industry', v)}
          options={industryOptions}
        />
      ),
    },
  ]

  return (
    <CForm
      items={items}
      size={size}
      labelWidth={labelWidth}
      gutterSize={gutterSize}
      labelDirection={labelDirection}
      labelAlign={labelAlign}
      col={col}
    />
  )
}
```

### 表单验证

```jsx live
function Demo() {
  const [formData, setFormData] = useState({
    name: '',
    gender: 'male',
    birthday: null,
    displayBirthday: '',
    industry: '',
    hobbies: [],
  })

  const setField = (k, v) =>
    setFormData({
      ...formData,
      [k]: v,
    })

  const genderOptions = [
    { label: 'Male', value: 'male' },
    { label: 'Female', value: 'female' },
  ]

  const industryOptions = [
    { label: 'IT', value: 'IT' },
    { label: 'Medical', value: 'Medical' },
    { label: 'Entertainment', value: 'Entertainment' },
    { label: 'Transportation', value: 'Transportation' },
  ]

  const items = [
    {
      label: '姓名',
      field: 'name',
      rules: [v => (v ? false : '请输入姓名')],
      children: (
        <CInput
          value={formData.name}
          onChange={v => setField('name', v)}
          placeholder="请输入姓名"
        />
      ),
    },
    {
      label: '性别',
      field: 'gender',
      rules: [
        v => {
          return v === 'male' ? false : '只能选Male!'
        },
      ],
      children: (
        <CRadioGroup
          value={formData.gender}
          options={genderOptions}
          onChange={v => setField('gender', v)}
        />
      ),
    },
    {
      label: '生日',
      field: 'birthday',
      rules: [v => (!v ? '请选择生日' : false)],
      children: (
        <CDatePicker
          format="MMM DD, YYYY"
          value={formData.birthday}
          placeholder="请选择生日"
          onChange={v => setField('birthday', v)}
          formattedValue={formData.displayBirthday}
          onFormattedValueChange={v => setField('displayBirthday', v)}
        />
      ),
    },
    {
      label: '行业',
      field: 'industry',
      rules: [
        v =>
          v !== 'IT' && v !== 'Entertainment'
            ? '只能选IT或者Entertainment!'
            : false,
      ],
      children: (
        <CSelect
          value={formData.industry}
          onChange={v => setField('industry', v)}
          options={industryOptions}
        />
      ),
    },
    {
      label: '爱好',
      field: 'hobbies',
      rules: [v => (v && v.length < 2 ? '至少选择两个爱好' : false)],
      children: (
        <CCheckboxGroup
          value={formData.hobbies}
          onChange={v => setField('hobbies', v)}
          options={['Reading', 'Writing', 'Singing', 'Dancing'].map(h => ({
            label: h,
            value: h,
          }))}
        />
      ),
    },
  ]

  const formRef = useRef(null)

  useEffect(() => {
    console.log(formRef)
  }, [])

  return (
    <div className="c-pa-md">
      <CForm ref={formRef} value={formData} items={items} />
    </div>
  )
}
```

### CForm Props

<PropTable name="CForm" typeWidth="240px" />

### CFormItem Props

<PropTable name="CFormItem" typeWidth="200px" />
